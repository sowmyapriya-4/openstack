Verifying heat installation.
Waiting for heat-engine to start.
ssh controller source /home/stack/config/demo-openstackrc.sh; openstack stack list 2>&1 |  grep 'orchestration service not found'
Verifying that no other instance VMs are left.
WARNING Existing VMs found. There may not be enough resources for this test.
+--------------------------------------+------------------+--------+-------------------------+--------+---------+
| ID                                   | Name             | Status | Networks                | Image  | Flavor  |
+--------------------------------------+------------------+--------+-------------------------+--------+---------+
| 9c528fe5-d03c-4b95-9545-df51a5734443 | private-instance | ACTIVE | selfservice=172.16.1.42 | cirros | m1.nano |
+--------------------------------------+------------------+--------+-------------------------+--------+---------+
Creating a test heat template.
ssh controller cat > demo-template.yml

| 0  | m1.nano |  64 |    1 |         0 |     1 | True      |
Proceeding, m1.nano flavor exists.
Current flavors:
+----+---------+-----+------+-----------+-------+-----------+
| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |
+----+---------+-----+------+-----------+-------+-----------+
| 0  | m1.nano |  64 |    1 |         0 |     1 | True      |
+----+---------+-----+------+-----------+-------+-----------+

ssh controller source /home/stack/config/demo-openstackrc.sh; openstack network list
NET_ID: fa9ea2fb-f15c-49ed-a148-abf5a80539a1
ssh controller source /home/stack/config/demo-openstackrc.sh; openstack stack create -t demo-template.yml     --parameter 'NetID=fa9ea2fb-f15c-49ed-a148-abf5a80539a1' stack
+---------------------+--------------------------------------------------------------------------------------------------+
| Field               | Value                                                                                            |
+---------------------+--------------------------------------------------------------------------------------------------+
| id                  | cccc582e-f134-4e1d-9314-cea0901c35fc                                                             |
| stack_name          | stack                                                                                            |
| description         | Launch a basic instance with CirrOS image using the m1.nano flavor, mykey key,  and one network. |
| creation_time       | 2022-03-10T13:40:42Z                                                                             |
| updated_time        | None                                                                                             |
| stack_status        | CREATE_IN_PROGRESS                                                                               |
| stack_status_reason | Stack CREATE started                                                                             |
+---------------------+--------------------------------------------------------------------------------------------------+
Verifying successful creation of stack.
openstack stack list
......| cccc582e-f134-4e1d-9314-cea0901c35fc | stack      | CREATE_COMPLETE | 2022-03-10T13:40:42Z | None         |
Showing the name and IP address of the instance.
ssh controller source /home/stack/config/demo-openstackrc.sh; openstack stack output show --all stack; nova list
+---------------+--------------------------------------------------+
| Field         | Value                                            |
+---------------+--------------------------------------------------+
| instance_ip   | {                                                |
|               |   "output_key": "instance_ip",                   |
|               |   "description": "IP address of the instance.",  |
|               |   "output_value": "203.0.113.148"                |
|               | }                                                |
| instance_name | {                                                |
|               |   "output_key": "instance_name",                 |
|               |   "description": "Name of the instance.",        |
|               |   "output_value": "stack-server-wj3fobafpqn2"    |
|               | }                                                |
+---------------+--------------------------------------------------+
+--------------------------------------+---------------------------+--------+------------+-------------+-------------------------+
| ID                                   | Name                      | Status | Task State | Power State | Networks                |
+--------------------------------------+---------------------------+--------+------------+-------------+-------------------------+
| 9c528fe5-d03c-4b95-9545-df51a5734443 | private-instance          | ACTIVE | -          | Running     | selfservice=172.16.1.42 |
| 40793649-d925-4b1a-8dc0-f2f9a87db665 | stack-server-wj3fobafpqn2 | ACTIVE | -          | Running     | provider=203.0.113.148  |
+--------------------------------------+---------------------------+--------+------------+-------------+-------------------------+
Deleting the test stack.
ssh controller source /home/stack/config/demo-openstackrc.sh; openstack stack list
SUM HEAT MEM               total        used        free      shared  buff/cache   available
SUM HEAT MEM Mem:           3732        3289         190           4         251         208
SUM HEAT MEM Swap:          2319         661        1658 
ssh controller source /home/stack/config/demo-openstackrc.sh; openstack stack delete cccc582e-f134-4e1d-9314-cea0901c35fc
Waiting for test stack to disappear..
